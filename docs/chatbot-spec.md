# 챗봇 기술 스펙 및 비용 분석

> 개발팀 사전 조사 결과 (2025.01)

---

## 1. 챗봇 구현 방식 비교

| 방식 | 설명 | 장점 | 단점 |
|------|------|------|------|
| **OpenAI API 기반** | GPT 모델로 대화 처리 | 자연스러운 대화, 빠른 개발 | API 비용 발생 |
| **규칙 기반** | 키워드 매칭 + 시나리오 분기 | 비용 없음, 예측 가능 | 딱딱한 대화, 유연성 부족 |
| **하이브리드** | 규칙 우선 → 실패 시 GPT | 비용 절감 | 구현 복잡도 증가 |

**추천**: OpenAI API 기반 (MVP 비용이 매우 저렴)

---

## 2. OpenAI 모델 선택

| 모델 | Input 비용 | Output 비용 | 특징 |
|------|-----------|------------|------|
| **GPT-4o-mini** | $0.15 / 1M tokens | $0.60 / 1M tokens | 빠름, 저렴, 성능 충분 |
| GPT-4o | $2.50 / 1M tokens | $10.00 / 1M tokens | 고성능, 비용 높음 |

**추천**: GPT-4o-mini (MVP에 충분한 성능, 비용 10배 이상 절감)

---

## 3. 예상 API 비용

### 대화 1회당 토큰 사용량

| 구성 요소 | 토큰 수 |
|----------|--------|
| System prompt (봇 설정) | ~400 |
| 대화 히스토리 (5턴 기준) | ~800 |
| 사용자 입력 | ~50 |
| 봇 응답 | ~150 |
| **총합** | **~1,400** |

### 단계별 비용 추정 (GPT-4o-mini 기준)

| 단계 | 월간 대화 수 | 예상 비용 (USD) | 예상 비용 (KRW) |
|------|-------------|----------------|-----------------|
| **MVP/개발** | ~3,000회 | ~$0.8 | **~1,200원** |
| **베타 (100명)** | ~9,000회 | ~$2.4 | **~3,500원** |
| **정식 (1,000명)** | ~90,000회 | ~$24 | **~35,000원** |

> 💡 MVP 단계에서는 **월 1,000~2,000원** 수준으로 비용 부담 거의 없음

### 비용 절감 방법

| 방법 | 절감 효과 |
|------|----------|
| 대화 히스토리 제한 (최근 5~10개만 유지) | 30~50% |
| System prompt 간소화 | 10~20% |
| 자주 묻는 질문 캐싱 | 20~30% |
| 단순 질문은 규칙 기반으로 처리 | 50% 이상 |

---

## 4. 기술 스펙 요약

### 백엔드

| 항목 | 선택 |
|------|------|
| LLM | OpenAI GPT-4o-mini |
| 프레임워크 | FastAPI |
| 세션 저장 | Redis (MVP는 메모리도 가능) |
| 응답 방식 | 스트리밍 지원 (UX 향상) |

### API 엔드포인트

```
POST /api/chat
- Request:  { session_id, message, location? }
- Response: { reply, options?, recommendations?, context }
```

### 프론트엔드 컴포넌트

```
ChatContainer        # 전체 채팅 영역
├── MessageBubble    # 메시지 말풍선 (user/bot 구분)
├── QuickReplies     # 빠른 선택 버튼
├── RecommendationCard  # 추천 메뉴/가게 카드
├── ChatInput        # 입력창 + 전송 버튼
└── TypingIndicator  # 봇 응답 대기 표시
```

---

## 5. 대화 흐름 예시

```
[사용자] 오늘 좀 피곤한데 뭐 먹을까

[봇] 피곤하시군요! 😢 혹시 어떤 종류의 피로인가요?
     1. 체력적으로 지침 (운동, 야근 등)
     2. 정신적으로 지침 (스트레스, 번아웃)
     3. 수면 부족

[사용자] 야근해서 체력이 없어

[봇] 체력 보충에 좋은 메뉴를 추천드릴게요! 💪

     🍗 삼계탕 - 기력 회복에 좋아요
     🥩 소고기국밥 - 든든하게 힘이 나요
     🐙 낙지볶음 - 타우린이 피로 회복에 도움돼요

     위치를 알려주시면 근처 맛집도 찾아드릴게요!
```

---

## 6. 기획팀 확인 필요 사항

### 필수 확인

| 항목 | 질문 | 개발 영향 |
|------|------|----------|
| **컨디션 종류** | 몇 가지? (피로, 숙취, 스트레스...) | DB 스키마, 매핑 테이블 |
| **세부 분류** | 피로 → 체력/정신/수면 등 | 대화 시나리오 분기 |
| **대화 시나리오** | 주요 대화 흐름 예시 | 프롬프트 설계 |
| **봇 페르소나** | 말투 (친근/전문적/유머러스) | 프롬프트 설계 |

### 선택 확인

| 항목 | 질문 | 기본값 |
|------|------|--------|
| 추천 개수 | 한 번에 몇 개 메뉴? | 3개 |
| 위치 정보 | 필수 vs 선택 | 선택 |
| 추천 이유 | 상세 vs 간단 | 간단 (1줄) |

---

## 7. 개발 준비 현황

### 완료

- [x] 기술 스펙 조사
- [x] 비용 분석
- [x] OpenAI 연동 PoC 코드 작성
- [x] 프로젝트 구조 설계

### 대기 중 (기획 의존)

- [ ] 컨디션-메뉴 매핑 테이블 설계
- [ ] 상세 대화 시나리오 구현
- [ ] 프롬프트 최적화

### 기획 무관하게 진행 가능

- [ ] 크롤링 파이프라인 구축
- [ ] DB 스키마 설계 (기본 구조)
- [ ] 프론트엔드 채팅 UI 기본 틀

---

## 8. 결론

| 항목 | 결정 |
|------|------|
| 구현 방식 | **OpenAI API 기반** |
| 모델 | **GPT-4o-mini** |
| MVP 월 비용 | **~1,000원** (부담 없음) |
| 개발 난이도 | 중 (API 연동 경험 있으면 수월) |

> 기획 문서가 나오기 전까지 **크롤링 파이프라인**과 **개발 환경 구축**을 먼저 진행하는 것을 권장합니다.

---

*작성: 개발팀 / 최종 수정: 2025.01*
