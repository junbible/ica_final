# 시스템 아키텍처

## 기술 스택

### 데이터 수집
| 기술 | 용도 |
|------|------|
| Python | 크롤링 스크립트 |
| Selenium / Playwright | 동적 웹페이지 크롤링 |
| requests | API 호출 |

### 백엔드
| 기술 | 용도 |
|------|------|
| FastAPI | REST API 서버 |
| Pydantic | 데이터 검증 |
| SQLAlchemy | ORM |

### AI/NLP
| 기술 | 용도 |
|------|------|
| OpenAI API | 대화형 컨디션 파악, 추천 이유 생성 |
| KoNLPy | 한국어 형태소 분석 |
| Sentence Transformers | 리뷰 임베딩 |

### 프론트엔드
| 기술 | 용도 |
|------|------|
| React / Next.js | UI 프레임워크 |
| Tailwind CSS | 스타일링 |
| Axios | API 통신 |

### 데이터베이스
| 기술 | 용도 |
|------|------|
| PostgreSQL | 메인 DB (가게, 메뉴, 매핑 정보) |
| Elasticsearch | 리뷰 텍스트 검색 |
| Redis | 캐싱 (선택) |

---

## 시스템 구조도

```
┌─────────────────────────────────────────────────────────────────┐
│                         사용자                                   │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    프론트엔드 (Next.js)                          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │ 컨디션 선택  │  │  채팅 UI    │  │  추천 결과   │              │
│  └─────────────┘  └─────────────┘  └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│                    백엔드 API (FastAPI)                          │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐              │
│  │ /condition  │  │ /recommend  │  │   /chat     │              │
│  └─────────────┘  └─────────────┘  └─────────────┘              │
└─────────────────────────────────────────────────────────────────┘
                                │
                ┌───────────────┼───────────────┐
                ▼               ▼               ▼
┌───────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│   PostgreSQL      │ │  Elasticsearch  │ │   OpenAI API    │
│ - 가게 정보        │ │ - 리뷰 검색      │ │ - 대화 처리      │
│ - 메뉴 정보        │ │ - 키워드 매칭    │ │ - 추천 이유 생성  │
│ - 컨디션 매핑      │ │                 │ │                 │
└───────────────────┘ └─────────────────┘ └─────────────────┘
```

---

## 데이터 파이프라인

```
┌──────────────────────────────────────────────────────────────┐
│ 1. 데이터 수집                                                │
│    Naver Place API → 가게 기본 정보                           │
│    크롤링 → 리뷰 텍스트                                        │
└──────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌──────────────────────────────────────────────────────────────┐
│ 2. 전처리 & NLP                                               │
│    - 리뷰 텍스트 정제                                          │
│    - 형태소 분석 (KoNLPy)                                      │
│    - 키워드 추출 (맵다, 든든, 깔끔 등)                          │
└──────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌──────────────────────────────────────────────────────────────┐
│ 3. 저장                                                       │
│    PostgreSQL: 가게, 메뉴, 키워드 태그                         │
│    Elasticsearch: 리뷰 원문 + 임베딩                           │
└──────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌──────────────────────────────────────────────────────────────┐
│ 4. 추천                                                       │
│    컨디션 입력 → 키워드 매핑 → 메뉴/가게 필터링 → 결과 반환     │
└──────────────────────────────────────────────────────────────┘
```

---

## API 엔드포인트 (예정)

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/api/conditions` | 컨디션 목록 조회 |
| POST | `/api/recommend` | 추천 요청 |
| POST | `/api/chat` | 채팅 메시지 처리 |
| GET | `/api/restaurants/{id}` | 가게 상세 정보 |
| GET | `/api/menus/{id}` | 메뉴 상세 정보 |

---

## 5주 MVP 로드맵

### 1주차: 데이터 기반 구축
- [ ] 크롤링 파이프라인 구축
- [ ] 네이버 플레이스 데이터 수집 (지역 1개)
- [ ] PostgreSQL 스키마 설계
- [ ] 기본 데이터 적재

### 2주차: NLP & 매핑
- [ ] 리뷰 텍스트 전처리
- [ ] 키워드 추출 로직 구현
- [ ] 컨디션-키워드 매핑 테이블 구축
- [ ] Elasticsearch 인덱싱

### 3주차: 추천 알고리즘 & API
- [ ] 추천 알고리즘 구현
- [ ] FastAPI 서버 구축
- [ ] API 엔드포인트 개발
- [ ] 기본 테스트

### 4주차: 프론트엔드
- [ ] Next.js 프로젝트 셋업
- [ ] 컨디션 선택 UI
- [ ] 추천 결과 화면
- [ ] 채팅 인터페이스

### 5주차: 통합 & 마무리
- [ ] 프론트-백엔드 통합
- [ ] 버그 수정
- [ ] 성능 최적화
- [ ] 데모 준비
